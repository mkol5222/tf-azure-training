
locals {
    # cat ~/.kube/config | yq . | jq -r '.clusters[]|select(.name=="aks1")|.cluster.server'
    k8s_server = "https://aks1-m0773y2k.hcp.westeurope.azmk8s.io:443"
    # cat ~/.kube/config | yq . | jq -r '.clusters[]|select(.name=="aks1") | .cluster["certificate-authority-data"]'
    k8s_ca_cert = "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU2VENDQXRHZ0F3SUJBZ0lSQUxxY2F1UEpmZk9vYlBsS0s2dTFzK0l3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdJQmNOTWpNd09UQTFNRGN6TVRNeldoZ1BNakExTXpBNU1EVXdOelF4TXpOYQpNQTB4Q3pBSkJnTlZCQU1UQW1OaE1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBCjFwT3N4SnpqOGs0Y1lacm82TVlBcnR3bVRyZEF1cnIzMGVZeTRDZm45R0EwNUcrYTlyQVNseHovREFobnIweWoKb29kdXEyUGNyY0xBSklLTXZqZXJEYkJtK0NBVHNuZnlPZFd4MHM1dFF1aHUxeUgyT2NSa3ZYNThqemxRZUprQwpYN2Z2QXcyUGRNZ2QrRjV0SFNzUnVjQ01vNmY5K2FTdmxkUG1YK0FiektKZWN6K0p5dXg2TU8xQnZXVXgra0FECk0zcEFWRnVWZHZWYWFWeDZuM0EzNjVYeTlJVnlXNzJ4QTNnOHcvU0hDYUd0enhqL0hIdDlkaTNKR25YOVZFU2cKbEdLL1JaSEpjVFJiODZ6bXJRTDg2ekRJSWkrZWJsditYbFFHZzFubXhqc0ZuVGM0TktkUURQNytSYW14b1BIKwpjNkljdStpL2lqVW9EMkxOSjJOejRiU1F2QTNHMGpCNWlWckEyQ2xveHBMNFc5N3N1WUdjUXJHOTgvZlNLbGhHCk1EMkVnZE1rU1FxVXdlQ0FZR0tZTGNBZVRwdzB6V1Y4UUZGQStDbFh2aS8waDhuU1lUMm1NSXRMcDJ2L0t6WUgKdW9ZeDk4T0pKVUE1TDQ5R0lsNGxlNU9za21MQ3pPUzhwOFBhakp0K3M2VUhqWUI0anN2VDhQL2ZWK0FSTTlDSwpDU21YdkZydm44VS9WRW9YSkRtdzFFeW1Md2VnOWlyd3FQNERLL2lVMm04bHd0RWE0YW8reitFOGoxRldiMmVKCk5xM29pTm5YZGpwRnZ3L2FiZkFpcUVCWXdiK3lXdFQ5aFVRU0xrYlJMaVFmS3JrOU9wQlB1cndMZWxMRWc0emsKa2RjS3FJSkVpeHhVTGQ3ZThnL1RXeXJXaVBUcHdncW52SVhlbTRKZERQc0NBd0VBQWFOQ01FQXdEZ1lEVlIwUApBUUgvQkFRREFnS2tNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGREsveFVXQkZyTVYya3FOCk1CMGI5OUlHclRpVk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQ09Gd0hoRkZrR0U0SHFQTEhuNjE2ZlMrc0gKazRXdGNtOWZsQnUxcHNnM2dlS2Vva01qQVJ6TDQybXprcXg3SFRwbVZqb1JRcVEyL2k0SCtNWlBma2wycWNsUgpPVWYwd2R0VW5HTlFwQnRBZjBRcWNuK2V3Ykw2RFhzUFNMTEJtSFZXdUhaR3hNVlhjdGZkU1JZRDNvR09EZEhlCkF3by95R1VzNGg1d2lRS0VPUnkzY2NMRWNaM1RaZ3FlVEhJY0xuZkc2UWpRUGJHYndoMmhBUGxPZDBiMUFXbVoKblJ1UWVHaFpPY1EwTUwrVWk3T1p5Z2ttNlZ6VmE3U0RaZEp0VjZ4Z3p6bVArZ0Z4Q0tCVWVMNXJkUkhoYTIrVwo5U0MzUG1QUkRkVDE5L015K0hzOXpOZGNvcXJjV0F2WHBnYk1hZytGOGhnUzhKVWlBbFNWZ2FiQVhWYlArOGJRCkkzMHo0SXFaS1lVUU1BUEtGVXFmNW5ISDl4Smx5SzJjcVEvWGlma0plRzVnLy9sbzJXdTlvR1pNMFZsMWdWcmMKeTkxYnNIdXJlMVNTVFRqSWZhejY4THNTaGRRdlA0dUNpM0R1YzF2aWlkU3ZJZ3UrWmdkSk1CaUM1RlYzQ0dQYwpZNXJxUnovbENVQmlYamVockJ4TDFmUlJOUVdkM0RGMXIvS3BSbkRlZFd4aWhDVmV6amJZWnoxQkNjWTl5UVhUCmowU3hPdDVJejJ2THdUTVNydkZ2ODVXOFphR09wZWYxUFFzeDltYzBiWVBSSDZucFFpaVFFaUdTYlQ0K2dEODgKNktVWUR2NldrZW1CdXlVV2owRDdnYzY2OU15MDZEOFVMRGpycndUYlFYcytaajNHZWpRQWVIWU1FQVdBWWF1Kwppa0c2OCtKWnJoc1UyUnB1c2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    # SA token
    #  kubectl get secret/cloudguard-controller -o json | jq -r .data.token | base64 -d ; echo;
    k8s_token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhwV2RyMWY5Y1dGU2loWlVZcjZMM0Q2VUR5VGZtNGw5VTRYU0xGdFpRekEifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImNsb3VkZ3VhcmQtY29udHJvbGxlciIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjbG91ZGd1YXJkLWNvbnRyb2xsZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJiYzI0MDQ3ZC0wNTBhLTRmZWQtYTI1YS1lMGNlZGFmMGI4ZGUiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6ZGVmYXVsdDpjbG91ZGd1YXJkLWNvbnRyb2xsZXIifQ.LoJpHj0SjgHOHg0yDlUYctxaFJihn1wZHyjXzgpbkUPaMNHdmV0cFqs2GBNaihHfS5HVFl6DKgTe5cGxZIxRjoO_3aHP6DvNc3Q47y28ed1qKDNPdZ9Xl2my_-ZTe0-S4OFZA0-acCxCXTr3WCnKHFR98uFwOIkKNWA933dSVCGklohbyJUiq8F6F3qEAgRAmAEEQMOQ2HXtjrQIPYU_80rntg2P_MfmfQjapeBiZbXhrQGx0TxhlcesUAPbejJK2na5dzfatgTtsK-biU7RRg40gJrI9pNe7weYf9WXvxU93RrAuIg5WRRbfugwer_UqOhYMOTuqCZRKRYlCH0xiQk3OFHDZwahMYbhg2Zh6_7ghJgKp-YzDHHVnB73EPCHetady9hgsWLaiAOV---QTRVcjvcbyNRVEXUdEEu_A21t7W_l1zp3IurUXvzfkpR-eNYA_QvyQogGtXpESNMPORLAbGq-ipB6YCzouW4HD-KblfhrNHtrIFcJcKHFPM5l58AJzvMUn3sYWP2c5ikKQ5Nljpvp1Yq49cyNu9pIvVMP7kDRTqtY8rpQOaKz5orSVwWHo_UxgeRn7SDejK6VEntxIxVZAgoOjdhQtxJWom7OcjyOwuNuQDyqF9YAYowKRM0Mrn38gZjrhqfIoGTgNGp8mFuvQtsJbBwI7h2HcTI"

}

resource "checkpoint_management_kubernetes_data_center_server" "testKubernetes" {
  name       = "MyKubernetes"
  hostname   =  local.k8s_server
  token_file = base64encode( local.k8s_token )
  ca_certificate = base64encode( local.k8s_ca_cert )
  unsafe_auto_accept = true
}